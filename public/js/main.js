const translate = {
  pt_BR: {
    steel: 'ACÃßO',
    stainlessSteel: 'INOX',
    carbon: 'CARBONO',
    galvanized: 'GALVANIZADO',
    flanges: 'FLANGES E CONEX√ïES',
    metal: 'METAL',
    bronze: 'BRONZE',
    copper: 'COBRE',
    aluminum: 'ALUM√çNIO',
    brass: 'LAT√ÉO',
    plastic: 'PLASTICO',
    teflon: 'TEFLON',
    pa6g: 'PA6G',
    pu: 'PU',
    celeron: 'CELERON',
    rubber: 'BORRACHA',
    nbr: 'NBR',
    silicone: 'SILICONE',
    geomembrane: 'GEOMEMBRANA',
    neoprene: 'NEOPRENE',
    title: 'STEELPLAST',
    home: 'HOME',
    products: 'PRODUTOS',
    about: 'SOBRE',
    values: 'VALORES',
    contact: 'CONTATO',
    language: 'IDIOMA',
    aboutBody: `Bem-vindo √† Steelplast, uma organiza√ß√£o dedicada √† excel√™ncia e √† inova√ß√£o. 
    Desde a nossa funda√ß√£o em 2000, temos trabalhado incansavelmente para oferecer solu√ß√µes 
    excepcionais e construir \
    relacionamentos s√≥lidos com nossos clientes, colaboradores e parceiros.`,
    contactBody: `Preencha o formul√°rio e retornaremos em breve.`,
    companyValues: `Qualidade Intransigente: Comprometemo-nos a oferecer apenas 
    materiais de engenharia que atendam aos mais altos padr√µes de qualidade, assegurando a 
    satisfa√ß√£o e confian√ßa de nossos clientes.`,
    companyValues2: `Inova√ß√£o Cont√≠nua: Estimulamos a criatividade e a 
    busca constante por solu√ß√µes inovadoras, visando aprimorar 
    nossos processos e antecipar as necessidades do mercado.`,
    companyValues3: `Conex√£o Global: Acreditamos na for√ßa das conex√µes globais 
    e na import√¢ncia de integrar o Brasil ao cen√°rio internacional,
    promovendo um interc√¢mbio de conhecimentos e tecnologias.`,
    companyValues4: `Rela√ß√µes de Confian√ßa: Valorizamos a transpar√™ncia 
    e integridade em todas as nossas rela√ß√µes, 
    cultivando parcerias de longo prazo baseadas na confian√ßa m√∫tua e no respeito.`,
    companyValues5: `Atendimento Personalizado: Priorizamos a satisfa√ß√£o do cliente, 
    oferecendo um atendimento personalizado e consultivo, 
    adaptando-nos √†s necessidades espec√≠ficas de cada projeto.`,
    toastTime: 'agora',
    toastTitle: 'Oi, eu sou o Steel-bot! üë®‚Äçüîßüîß',
    toastBody: 'Acessando o site, voc√™ concorda com as regras de privacidade. üòä',
    formBtn: 'Interessado? Contate-nos! üë®‚Äçüîßüîß',
    formQuestion: 'Sua empresa j√° faz importa√ß√£o?',
    formAnswer: 'Sim, estou j√° fa√ßo importa√ß√£o! üöö‚úàÔ∏è',
    formAnswer2: 'N√£o, n√£o faco importa√ß√£o! ‚ùå',
    formResponse: `Sentimos muito, mas no momento s√≥ atendemos empresas que s√£o habilitadas junto √† Receita Federal
    para importa√ß√£o de materiais. üò¢`
  },
  en_US: {
    steel: 'STEEL',
    stainlessSteel: 'STAINLESS STEEL',
    carbon: 'CARBON',
    galvanized: 'GALVANIZED',
    flanges: 'FLANGES AND CONNECTIONS',
    metal: 'METAL',
    bronze: 'BRONZE',
    copper: 'COPPER',
    aluminum: 'ALUMINUM',
    brass: 'BRASS',
    plastic: 'PLASTIC',
    teflon: 'TEFLON',
    pa6g: 'PA6G',
    pu: 'PU',
    celeron: 'CELERON',
    rubber: 'RUBBER',
    nbr: 'NBR',
    silicone: 'SILICONE',
    geomembrane: 'GEOMEMBRANE',
    neoprene: 'NEOPRENE',
    title: 'STEELPLAST',
    home: 'HOME',
    products: 'PRODUCTS',
    about: 'ABOUT',
    values: 'COMPANY VALUES',
    contact: 'CONTACT',
    language: 'LANGUAGE',
    aboutBody: `Welcome to Steelplast, an organization dedicated to excellence and innovation. 
    Since our foundation in 2000, we have tirelessly worked to offer exceptional 
    solutions and build solid relationships with our clients, collaborators, and partners.`,
    contactBody: "Fill out the form and we will return soon.",
    companyValues: `Uncompromising Quality: We commit to offering only engineering materials 
    that meet the highest standards of quality, ensuring the satisfaction and trust of our clients.`,
    companyValues2: `Continuous Innovation: We stimulate creativity and 
    the constant search for innovative solutions, aiming to improve our 
    processes and anticipate market needs.`,
    companyValues3: `Global Connection: We believe in the strength of global connections 
    and the importance of integrating Brazil into the international scenario, promoting 
    an exchange of knowledge and technologies.`,
    companyValues4: `Trustworthy Relationships: We value transparency and integrity in all 
    our relationships, cultivating long-term partnerships based on mutual trust and respect.`,
    companyValues5: `Personalized Service: We prioritize customer satisfaction, 
    offering personalized and consultative service, adapting to the specific needs of each project.`,
    toastTime: 'now',
    toastTitle: 'Hi, I am the Steel-bot! üë®‚Äçüîßüîß',
    toastBody: 'Accessing the site, you agree with the privacy rules. üòä',
    formBtn: 'Interested? Contact us! üë®‚Äçüîßüîß',
    formQuestion: 'Your company already imports?',
    formAnswer: 'Yes, I am importing! üöö‚úàÔ∏è',
    formAnswer2: 'No, I do not import! ‚ùå',
    formResponse: `Sorry, but at the moment we only serve businesses that are licensed with the Federal Revenue Administration to import materials. üò¢`
  },
  es_ES: {
    steel: 'ACERO',
    stainlessSteel: 'ACERO INOXIDABLE',
    carbon: 'CARBONO',
    galvanized: 'GALVANIZADO',
    flanges: 'BRIDAS Y CONEXIONES',
    metal: 'METAL',
    bronze: 'BRONCE',
    copper: 'COBRE',
    aluminum: 'ALUMINIO',
    brass: 'LAT√ìN',
    plastic: 'PL√ÅSTICO',
    teflon: 'TEFLON',
    pa6g: 'PA6G',
    pu: 'PU',
    celeron: 'CELERON',
    rubber: 'GOMA',
    nbr: 'NBR',
    silicone: 'SILICONA',
    geomembrane: 'GEOMEMBRANA',
    neoprene: 'NEOPRENE',
    title: 'STEELPLAST',
    home: 'INICIO',
    products: 'PRODUCTOS',
    about: 'SOBRENOS',
    values: 'VALORES',
    contact: 'CONTACTO',
    language: 'IDIOMA',
    aboutBody: `Bienvenido a Steelplast, una organizaci√≥n dedicada a la excelencia y la innovaci√≥n. 
    Desde nuestra fundaci√≥n en el a√±o 2000, hemos trabajado 
    incansablemente para ofrecer soluciones excepcionales y construir relaciones 
    s√≥lidas con nuestros clientes, colaboradores y socios.`,
    contactBody: `Complete el formulario y nos pondremos en contacto pronto.`,
    companyValues: `Calidad Intransigente: Nos comprometemos a ofrecer solo 
    materiales de ingenier√≠a que cumplan con los est√°ndares de calidad m√°s altos, 
    asegurando la satisfacci√≥n y confianza de nuestros clientes.`,
    companyValues2: `Innovaci√≥n Continua: Estimulamos la creatividad y la b√∫squeda 
    constante de soluciones innovadoras, con el objetivo de mejorar nuestros procesos y 
    anticipar las necesidades del mercado.`,
    companyValues3: `Conexi√≥n Global: Creemos en la fuerza de las conexiones globales y 
    en la importancia de integrar a Brasil en el escenario internacional, promoviendo un 
    intercambio de conocimientos y tecnolog√≠as.`,
    companyValues4: `Relaciones de Confianza: Valoramos la transparencia e integridad en 
    todas nuestras relaciones, cultivando asociaciones a largo plazo basadas en la confianza 
    mutua y el respeto.`,
    companyValues5: `Atenci√≥n Personalizada: Priorizamos la satisfacci√≥n del cliente, 
    ofreciendo un servicio personalizado y consultivo, adapt√°ndonos a las necesidades 
    espec√≠ficas de cada proyecto.`,
    toastTime: 'ahora',
    toastTitle: 'Hola, soy el Steel-bot! üë®‚Äçüîßüîß',
    toastBody: 'Accediendo al sitio, aceptas las normas de privacidad. üòä',
    formBtn: 'Interesado? Contactanos! üë®‚Äçüîßüîß',
    formQuestion: 'Tu empresa ya import√≥?',
    formAnswer: 'Si, estoy importando! üöö‚úàÔ∏è',
    formAnswer2: 'No, no importo! ‚ùå',
    formResponse: `Lo siento, pero en este momento solo atendemos empresas que son habilitadas junto a la Recepcion Federal para importar materiales. üò¢`
  }
}

const availableLanguages = ['pt_BR', 'en_US', 'es_ES'];

function setCookie(name, value, days) {
  let expires = "";
  if (days) {
    const date = new Date();
    date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
    expires = "; expires=" + date.toUTCString();
  }
  document.cookie = name + "=" + (value || "") + expires + "; path=/";
}

function getCookie(name) {
  let nameEQ = name + "=";
  let ca = document.cookie.split(';');
  for(let i=0; i < ca.length; i++) {
    let c = ca[i];
    while (c.charAt(0) === ' ') c = c.substring(1, c.length);
    if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
  }
  return null;
}

var language;
var cookie = getCookie('language');

if(cookie && availableLanguages.includes(cookie)){
  language = cookie;
}else{
  language = 'pt_BR';
}

const images = {
  A: {
    A1B : {
      src: `public/images/products/A1B.png`,
      styles: {
        objectPosition: '0% 50%',
      }
    },
    A1B : {
      src: `public/images/products/A1B.png`,
      styles: {
        objectPosition: '50% 50%',
      }
    },
    A3B6 : {
      src: `public/images/products/A3B6.jpeg`,
      styles: {
        objectPosition: '50% 50%',
        transform: 'scaleX(1)'
      }
    },
    A2TQ3 : {
      src: `public/images/products/A2TQ31.jpeg`,
      styles: {
        objectPosition: '50% 50%',
      }
    },
  },
  B: {
    B1: {
      src: `public/images/products/B1.png`,
      styles: {
        objectPosition: '0% 50%',
        transform: 'scaleX(1)'
      }
    },
    B2: {
      src: `public/images/products/B2.png`,
      styles: {
        objectPosition: '100% 50%',
      }
    },
    B3: {
      src: `public/images/products/B3.png`,
      styles: {
        objectPosition: '100% 50%',
      }
    },
    B4: {
      src: `public/images/products/B4.png`,
      styles: {
        objectPosition: '0% 50%',
      }
    },
  },
  M: {
    M2R: {
      src: `public/images/products/M2R.png`,
      styles: {
        objectPosition: '50% 50%',
      }
    },
    M1B: {
      src: `public/images/products/M1B.jpeg`,
      styles: {
        objectPosition: '100% 50%',
      }
    },
    M4C: {
      src: `public/images/products/M4C.png`,
      styles: {
        objectPosition: '100% 0%',
      }
    },
  },
  P: {
    P1R: {
      src: `public/images/products/P1R.png`,
      styles: {
        objectPosition: '100% 50%',
      }
    },
    P2R: {
      src: `public/images/products/P2R.jpeg`,
      styles: {
        objectPosition: '100% 50%',
      }
    },
    P3R: {
      src: `public/images/products/P3R.png`,
      styles: {
        objectPosition: '100% 50%',
        transform: 'scaleX(1)'
      }
    },
  },
};

const initial = {
  A: {
    m: 'A',
    sub: '1',
    plus: 'B',
    type: 'A1B',
    src: `public/images/products/A1B.png`,
    styles: {
      objectPosition: '0% 50%',
    }
  },
  B: {
    m: 'B',
    sub: '2',
    plus: '',
    type: 'B2',
    src: `public/images/products/B2.png`,
    styles: {
      objectPosition: '100% 50%',
    }
  },
  M: {
    m: 'M',
    sub: '1',
    plus: 'T',
    type: 'M1T',
    src: `public/images/products/M1T.png`,
    styles: {
      objectPosition: '50% 30%',
    }
  },
  P: {
    m: 'P',
    sub: '1',
    plus: 'R',
    type: 'P1R',
    src: `public/images/products/P1R.png`,
    styles: {
      objectPosition: '70% 30%',
    }
  },
};

var materials = {
  A: {
    name: translate[language].steel,
    1: translate[language].stainlessSteel,
    2: translate[language].carbon,
    3: translate[language].galvanized,
    4: translate[language].flanges,
  },
  B: {
    name: translate[language].rubber,
    1: translate[language].nbr,
    2: translate[language].silicone,
    3: translate[language].geomembrane,
    4: translate[language].neoprene,
  },
  M: {
    name: translate[language].metal,
    1: translate[language].bronze,
    2: translate[language].copper,
    3: translate[language].aluminum,
    4: translate[language].brass,
  },
  P: {
    name: translate[language].plastic,
    1: translate[language].teflon,
    2: translate[language].pa6g,
    3: translate[language].pu,
    4: translate[language].celeron,
  }
};

Vue.component('header-component', {
  template: '#header-template',
  data() {
    return {
      homeTitle: translate[language].home,
      productsTitle: translate[language].products,
      aboutTitle: translate[language].about,
      contactTitle: translate[language].contact,
    };
  },
  methods: {
    changeLanguage(language){
      setCookie('language', language, 30);
      window.location.reload();
    }
  }
});

Vue.component('carousel-component', {
  template: '#carousel-template',
  data() {
    return {
      images: initial,
      materials: materials
    };
  },
  methods: {
    nextImage(item){

      const keys = Object.keys(images[item.m]);
      const currentIndex = keys.indexOf(item.type);
      const nextIndex = (currentIndex + 1) % keys.length;
      const nextKey = keys[nextIndex];

      if(nextKey){
        initial[item.m].src = images[item.m][nextKey].src;
        initial[item.m].m = nextKey[0];
        initial[item.m].sub = nextKey[1];
        initial[item.m].plus = nextKey[2] === undefined ? '' : nextKey[2];
        initial[item.m].type = nextKey;
        initial[item.m].styles = images[item.m][nextKey].styles;
      }
    }
  }
});

Vue.component('main-component', {
  template: '#main-template',
  data() {
    return {
      items: [
        {
          id: 1,
          title: '',
          body: translate[language].aboutBody,
          empty: '',
          styles: {
            height: '200px'
          }
        }
      ],
      translation: materials,
      toast: {
        title: translate[language].toastTitle,
        body: translate[language].toastBody,
        time: translate[language].toastTime
      }
    }
  },
  methods: {
    writeText(item) {
      let currentIndex = 0;
      const intervalId = setInterval(() => {
        item.empty += item.body[currentIndex];
        currentIndex++;

        if (currentIndex === item.body.length) {
          clearInterval(intervalId);
        }
      }, 50);
    }
  },
  mounted() {
    for (let i = 0; i < this.items.length; i++) {
      this.writeText(this.items[i]);
    }

    const toastTrigger = document.getElementById('liveToastBtn')
    const toastLiveExample = document.getElementById('liveToast')

    const toastBootstrap = bootstrap.Toast.getOrCreateInstance(toastLiveExample)
    toastBootstrap.show()

  }
});

Vue.component('form-component', {
  template: '#form-template',
  data() {
    return {
      formBtn: '',
      formQuestion: '',
      translation: {
        no: translate[language].formAnswer2,
        yes: translate[language].formAnswer,
        response: ''
      },
      formAnswer: '',
      hideQuestion: true,
      hideResponse: true,
      formOk: false
    }
  },
  methods: {
    showQuestion(){
      this.hideQuestion = false;
    },
    showResponse(option){
      this.hideResponse = false;

      if(option === 2){
        this.translation.response = translate[language].formResponse;
      }

      if(option === 1){
        this.formOk = true;
      }
    }
  },
  mounted() {
    this.formBtn = translate[language].formBtn;
    this.formQuestion = translate[language].formQuestion + 'ü§î';
  }
})

new Vue({
  el: '#app',
});